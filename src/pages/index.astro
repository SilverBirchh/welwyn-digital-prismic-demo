---
import { SITE } from '~/config.mjs';
import Layout from '~/layouts/PageLayout.astro';

import Hero from '~/components/widgets/Hero.astro';
import LatestPosts from '~/components/blog/LatestPosts.astro';
import { getPage } from '~/prismic';

const page = await getPage('homepage');

const title = page.data.homepage_title[0].text;

const meta = {
  title: page.data.page_title[0].text,
  description: SITE.description,
  dontUseTitleTemplate: true,
};
---

<Layout {meta}>
  <Hero
    subtitle="The title and document title are powered by Primic. Update them their and refresh to see the changes. Maybe write a new blog post?"
  >
    <Fragment slot="title">
      {title}
    </Fragment>
  </Hero>

  <!-- HighlightedPosts Widget ******* -->

  <LatestPosts
    title="Find out more content in our Blog"
  />
</Layout>
